var d=document.querySelector(".tasks__list"),p=document.querySelector("#new-task").content.querySelector(".tasks__item"),E=document.querySelector("#tasks-placeholder"),l=document.createDocumentFragment(),h=document.querySelector(".tasks__count"),m=document.querySelector(".done__list"),y=document.querySelector("#done-task").content.querySelector(".done__item"),g=document.querySelector(".done__count"),q=document.querySelector("#done-placeholder"),u=document.createDocumentFragment(),a=t=>{d.innerHTML="",m.innerHTML="";let e=0,s=0;t.forEach(o=>{if(o.done===!1){let n=p.cloneNode(!0);n.querySelector(".task-card__text").value=o.name,n.dataset.id=o.id,l.append(n),E.classList.add("hidden"),e+=1}else{let n=y.cloneNode(!0);n.querySelector(".task-card__text").textContent=o.name,n.dataset.id=o.id,u.append(n),q.classList.add("hidden"),s+=1}}),d.append(l),m.append(u),h.textContent=e,g.textContent=s};var P=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),H=document.createDocumentFragment(),J=document.querySelector(".add-tasks"),L=document.querySelector("#tasks-placeholder"),c=JSON.parse(localStorage.getItem("id"))||0,i=()=>(c+=1,localStorage.setItem("id",JSON.stringify(c)),c),k=()=>JSON.parse(localStorage.getItem("tasks"))||[],_=t=>{localStorage.setItem("tasks",JSON.stringify(t))};var T=()=>{document.querySelectorAll(".tasks__item").length===0&&L.classList.remove("hidden")};var f=1500,I=400,N=100,r=document.querySelector(".done__list"),x=document.querySelector(".tasks__list"),C=document.querySelector("#done-task").content.querySelector(".done__item"),D=document.querySelector("#done-placeholder"),S=document.createDocumentFragment(),F=()=>{let t=r.querySelector(".done__item:last-child");t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"center"})},O=t=>{let e=C.cloneNode(!0);e.classList.add("task-card--new"),e.querySelector(".task-card__text").textContent=t,S.append(e),D.classList.add("hidden"),r.append(S),setTimeout(()=>{r.querySelector(".task-card--new").classList.add("task-card--show")},N)},w=(t,e)=>t.id-e.id,A=t=>{let e=k();e.forEach(s=>{s.id===parseInt(t.dataset.id,10)&&(s.done=!0,s.id=i())}),e.sort(w),_(e),a(e)},M=t=>{if(t.target.matches(".button-icon--check")){let e=t.target.closest(".tasks__item"),s=e.querySelector(".task-card__label"),o=e.querySelector(".task-card__text").value;e.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),t.target.disabled=!0,setTimeout(()=>{O(o)},I),setTimeout(()=>{A(e),F(),T()},f)}},j=()=>{x.addEventListener("change",M)};export{M as onCheckChange,j as setCheckTaskEvent};
