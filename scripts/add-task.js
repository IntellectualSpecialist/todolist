var q=1e3,v=document.querySelector("#tasks-placeholder"),L=()=>{document.querySelectorAll(".tasks__item").length===0&&v.classList.remove("hidden")},C=e=>{let t=r();t.forEach(s=>{s.id===parseInt(e.dataset.id,10)&&(s.done=!0)}),c(t),n(t)},u=e=>{let t=e.target.closest(".tasks__item"),s=t.querySelector(".task-card__label");t.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),e.target.disabled=!0,setTimeout(()=>{C(t),L()},q)};var k=1e3,I=document.querySelector("#tasks-placeholder"),b=()=>{document.querySelectorAll(".tasks__item").length===0&&I.classList.remove("hidden")},x=e=>{e.classList.add("task-card--animation");let t=r();t=t.filter(s=>s.id!==parseInt(e.dataset.id,10)),c(t),setTimeout(()=>{n(t)},k)},p=e=>{let t=e.target.closest(".tasks__item");e.target.disabled=!0,x(t),setTimeout(()=>{b()},k)};var T=e=>{let t=e.target.closest(".tasks__item"),s=r();s.forEach(a=>{a.id===parseInt(t.dataset.id,10)&&(a.name=e.target.value)}),c(s),n(s)};var _=document.querySelector(".tasks__list"),F=document.querySelector("#new-task").content.querySelector(".tasks__item"),N=document.querySelector("#tasks-placeholder"),S=document.createDocumentFragment(),R=document.querySelector(".tasks__count"),d=document.querySelector(".done__list"),O=document.querySelector("#done-task").content.querySelector(".done__item"),w=document.querySelector(".done__count"),A=document.querySelector("#done-placeholder"),l=document.createDocumentFragment(),n=e=>{_.innerHTML="",d.innerHTML="";let t=0,s=0;e.forEach(a=>{if(a.done===!1){let o=F.cloneNode(!0),h=o.querySelector(".button-icon--check"),f=o.querySelector(".button-icon--bin"),y=o.querySelector(".task-card__text");o.querySelector(".task-card__text").value=a.name,o.dataset.id=a.id,S.append(o),N.classList.add("hidden"),h.addEventListener("change",u),f.addEventListener("click",p),y.addEventListener("change",T),t+=1}else{let o=O.cloneNode(!0);o.querySelector(".task-card__text").textContent=a.name,o.dataset.id=a.id,l.append(o),d.append(l),A.classList.add("hidden"),s+=1}}),_.append(S),d.append(l),R.textContent=t,w.textContent=s};var D=5e3,P=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),H=document.createDocumentFragment(),M=document.querySelector(".add-tasks"),m=JSON.parse(localStorage.getItem("id"))||0,J=()=>(m+=1,localStorage.setItem("id",JSON.stringify(m)),m);function r(){return JSON.parse(localStorage.getItem("tasks"))||[]}var c=e=>{localStorage.setItem("tasks",JSON.stringify(e))};var g=(e,t)=>({id:J(),name:e,done:t}),E=()=>{let e=P.cloneNode(!0);H.append(e),M.append(e),setTimeout(()=>{e.remove()},D)};var i=document.querySelector(".add-tasks__form"),W=i.querySelector(".add-tasks__field"),B=e=>{if(e){let t=r(),s=g(e,!1);t.push(s),c(t),n(t)}else E()},j=e=>{e.preventDefault(),B(W.value),i.reset()},ce=()=>{i.addEventListener("submit",j)};export{ce as setFormEvents};
