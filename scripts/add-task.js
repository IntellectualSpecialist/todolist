var y=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),q=document.createDocumentFragment(),L=document.querySelector(".add-tasks"),c=JSON.parse(localStorage.getItem("id"))||0,I=()=>(c+=1,localStorage.setItem("id",JSON.stringify(c)),c);function r(){return JSON.parse(localStorage.getItem("tasks"))||[]}var l=(e,t)=>({id:I(),name:e,done:t}),m=()=>{let e=y.cloneNode(!0);q.append(e),L.append(e),setTimeout(()=>{e.remove()},5e3)};var C=1e3,v=document.querySelector("#tasks-placeholder"),b=()=>{document.querySelectorAll(".tasks__item").length===0&&v.classList.remove("hidden")},N=e=>{let t=r();t.forEach(s=>{s.id===parseInt(e.dataset.id,10)&&(s.done=!0)}),localStorage.setItem("tasks",JSON.stringify(t)),a(t)},i=e=>{let t=e.target.closest(".tasks__item"),s=t.querySelector(".task-card__label");t.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),e.target.disabled=!0,setTimeout(()=>{N(t),b()},C)};var u=1e3,x=document.querySelector("#tasks-placeholder"),O=()=>{document.querySelectorAll(".tasks__item").length===0&&x.classList.remove("hidden")},F=e=>{e.classList.add("task-card--animation");let t=r();t=t.filter(s=>s.id!==parseInt(e.dataset.id,10)),localStorage.setItem("tasks",JSON.stringify(t)),setTimeout(()=>{a(t)},u)},k=e=>{let t=e.target.closest(".tasks__item");e.target.disabled=!0,F(t),setTimeout(()=>{O()},u)};var p=e=>{let t=e.target.closest(".tasks__item"),s=r();s.forEach(n=>{n.id===parseInt(t.dataset.id,10)&&(n.name=e.target.value)}),localStorage.setItem("tasks",JSON.stringify(s)),a(s)};var S=document.querySelector(".tasks__list"),R=document.querySelector("#new-task").content.querySelector(".tasks__item"),A=document.querySelector("#tasks-placeholder"),g=document.createDocumentFragment(),J=document.querySelector(".tasks__count"),_=document.querySelector(".done__list"),w=document.querySelector("#done-task").content.querySelector(".done__item"),D=document.querySelector(".done__count"),H=document.querySelector("#done-placeholder"),T=document.createDocumentFragment(),a=e=>{S.innerHTML="",_.innerHTML="";let t=0,s=0;e.forEach(n=>{if(n.done===!1){let o=R.cloneNode(!0),E=o.querySelector(".button-icon--check"),h=o.querySelector(".button-icon--bin"),f=o.querySelector(".task-card__text");o.querySelector(".task-card__text").value=n.name,o.dataset.id=n.id,g.append(o),S.append(g),A.classList.add("hidden"),E.addEventListener("change",i),h.addEventListener("click",k),f.addEventListener("change",p),t+=1}else{let o=w.cloneNode(!0);o.querySelector(".task-card__text").textContent=n.name,o.dataset.id=n.id,T.append(o),_.append(T),H.classList.add("hidden"),s+=1}}),J.textContent=t,D.textContent=s};var d=document.querySelector(".add-tasks__form"),M=d.querySelector(".add-tasks__field"),P=e=>{if(e){let t=r(),s=l(e,!1);t.push(s),localStorage.setItem("tasks",JSON.stringify(t)),a(t)}else m()},W=e=>{e.preventDefault(),P(M.value),d.reset()},ne=()=>{d.addEventListener("submit",W)};export{ne as setFormEvents};
