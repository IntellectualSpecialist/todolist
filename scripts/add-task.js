var w=1500,p=400,l=document.querySelector(".done__list"),F=document.querySelector("#done-task").content.querySelector(".done__item"),N=document.querySelector("#done-placeholder"),T=document.createDocumentFragment(),D=()=>{let t=l.querySelector(".done__item:last-child");t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"center"})},_=t=>{let e=F.cloneNode(!0);e.classList.add("task-card--new"),e.querySelector(".task-card__text").textContent=t,T.append(e),N.classList.add("hidden"),l.append(T),setTimeout(()=>{l.querySelector(".task-card--new").classList.add("task-card--show")},p)},O=t=>{let e=r();e.forEach(s=>{s.id===parseInt(t.dataset.id,10)&&(s.done=!0)}),c(e),a(e)},S=t=>{let e=t.target.closest(".tasks__item"),s=e.querySelector(".task-card__label"),o=e.querySelector(".task-card__text").value;e.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),t.target.disabled=!0,setTimeout(()=>{_(o)},p),setTimeout(()=>{_(o),O(e),D(),d()},w)};var R=1e3,M=t=>{let e=r();e=e.filter(s=>s.id!==parseInt(t.dataset.id,10)),c(e),a(e)},E=t=>{let e=t.target.closest(".tasks__item");t.target.disabled=!0,e.classList.add("task-card--animation"),setTimeout(()=>{M(e),d()},R)};var P=(t,e)=>{let s=r();s.forEach(o=>{o.id===parseInt(t.dataset.id,10)&&(o.name=e)}),c(s),a(s)},h=t=>{let e=t.target.closest(".tasks__item"),s=t.target.value;P(e,s)};var g=document.querySelector(".tasks__list"),A=document.querySelector("#new-task").content.querySelector(".tasks__item"),H=document.querySelector("#tasks-placeholder"),y=document.createDocumentFragment(),W=document.querySelector(".tasks__count"),q=document.querySelector(".done__list"),J=document.querySelector("#done-task").content.querySelector(".done__item"),V=document.querySelector(".done__count"),B=document.querySelector("#done-placeholder"),f=document.createDocumentFragment(),a=t=>{g.innerHTML="",q.innerHTML="";let e=0,s=0;t.forEach(o=>{if(o.done===!1){let n=A.cloneNode(!0),b=n.querySelector(".button-icon--check"),x=n.querySelector(".button-icon--bin"),C=n.querySelector(".task-card__text");n.querySelector(".task-card__text").value=o.name,n.dataset.id=o.id,y.append(n),H.classList.add("hidden"),b.addEventListener("change",S),x.addEventListener("click",E),C.addEventListener("change",h),e+=1}else{let n=J.cloneNode(!0);n.querySelector(".task-card__text").textContent=o.name,n.dataset.id=o.id,f.append(n),B.classList.add("hidden"),s+=1}}),g.append(y),q.append(f),W.textContent=e,V.textContent=s};var j=5e3,z=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),G=document.createDocumentFragment(),K=document.querySelector(".add-tasks"),Q=document.querySelector("#tasks-placeholder"),m=JSON.parse(localStorage.getItem("id"))||0,U=()=>(m+=1,localStorage.setItem("id",JSON.stringify(m)),m),r=()=>JSON.parse(localStorage.getItem("tasks"))||[],c=t=>{localStorage.setItem("tasks",JSON.stringify(t))};var L=(t,e)=>({id:U(),name:t,done:e}),v=()=>{let t=z.cloneNode(!0);G.append(t),K.append(t),setTimeout(()=>{t.remove()},j)},d=()=>{document.querySelectorAll(".tasks__item").length===0&&Q.classList.remove("hidden")};var X=600,i=document.querySelector(".add-tasks__form"),k=i.querySelector(".add-tasks__field"),u=document.querySelector(".tasks__list"),Y=document.querySelector("#new-task").content.querySelector(".tasks__item"),Z=document.querySelector("#tasks-placeholder"),I=document.createDocumentFragment(),$=()=>{let t=u.querySelector(".tasks__item:last-child");t&&t.scrollIntoView({behavior:"smooth",block:"end",inline:"center"})},ee=t=>{let e=Y.cloneNode(!0);e.classList.add("task-card--new"),e.querySelector(".task-card__text").value=t,I.append(e),Z.classList.add("hidden"),u.append(I),setTimeout(()=>{u.querySelector(".task-card--new").classList.add("task-card--show")},0)},te=t=>{let e=r(),s=L(t,!1);e.push(s),c(e),a(e)},se=t=>{t.preventDefault();let e=k.value;e?(ee(e),setTimeout(()=>{te(e),$()},X),k.blur(),i.reset(),k.focus()):v()},ge=()=>{i.addEventListener("submit",se)};export{ge as setFormEvents};
