var _=document.querySelector(".tasks__list"),w=document.querySelector("#new-task").content.querySelector(".tasks__item"),N=document.querySelector("#tasks-placeholder"),p=document.createDocumentFragment(),D=document.querySelector(".tasks__count"),S=document.querySelector(".done__list"),O=document.querySelector("#done-task").content.querySelector(".done__item"),M=document.querySelector(".done__count"),A=document.querySelector("#done-placeholder"),h=document.createDocumentFragment(),n=e=>{_.innerHTML="",S.innerHTML="";let t=0,s=0;e.forEach(o=>{if(o.done===!1){let c=w.cloneNode(!0);c.querySelector(".task-card__text").value=o.name,c.dataset.id=o.id,p.append(c),N.classList.add("hidden"),t+=1}else{let c=O.cloneNode(!0);c.querySelector(".task-card__text").textContent=o.name,c.dataset.id=o.id,h.append(c),A.classList.add("hidden"),s+=1}}),_.append(p),S.append(h),D.textContent=t,M.textContent=s};var R=5e3,P=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),H=document.createDocumentFragment(),W=document.querySelector(".add-tasks"),B=document.querySelector("#tasks-placeholder"),l=JSON.parse(localStorage.getItem("id"))||0,m=()=>(l+=1,localStorage.setItem("id",JSON.stringify(l)),l),a=()=>JSON.parse(localStorage.getItem("tasks"))||[],r=e=>{localStorage.setItem("tasks",JSON.stringify(e))},f=()=>{let e=a();n(e)},y=(e,t)=>({id:m(),name:e,done:t}),g=()=>{let e=P.cloneNode(!0);H.append(e),W.append(e),setTimeout(()=>{e.remove()},R)},d=()=>{document.querySelectorAll(".tasks__item").length===0&&B.classList.remove("hidden")};var J=600,u=document.querySelector(".add-tasks__form"),i=u.querySelector(".add-tasks__field"),k=document.querySelector(".tasks__list"),V=document.querySelector("#new-task").content.querySelector(".tasks__item"),j=document.querySelector("#tasks-placeholder"),q=document.createDocumentFragment(),z=()=>{let e=k.querySelector(".tasks__item:last-child");e&&e.scrollIntoView({behavior:"smooth",block:"end",inline:"center"})},G=e=>{let t=V.cloneNode(!0);t.classList.add("task-card--new"),t.querySelector(".task-card__text").value=e,q.append(t),j.classList.add("hidden"),k.append(q),setTimeout(()=>{k.querySelector(".task-card--new").classList.add("task-card--show")},0)},K=e=>{let t=a(),s=y(e,!1);t.push(s),r(t),n(t)},Q=e=>{e.preventDefault();let t=i.value;t?(G(t),setTimeout(()=>{K(t),z()},J),i.blur(),u.reset(),i.focus()):g()},L=()=>{u.addEventListener("submit",Q)};var U=1500,X=400,Y=100,T=document.querySelector(".done__list"),Z=document.querySelector(".tasks__list"),$=document.querySelector("#done-task").content.querySelector(".done__item"),ee=document.querySelector("#done-placeholder"),v=document.createDocumentFragment(),te=()=>{let e=T.querySelector(".done__item:last-child");e&&e.scrollIntoView({behavior:"smooth",block:"end",inline:"center"})},se=e=>{let t=$.cloneNode(!0);t.classList.add("task-card--new"),t.querySelector(".task-card__text").textContent=e,v.append(t),ee.classList.add("hidden"),T.append(v),setTimeout(()=>{T.querySelector(".task-card--new").classList.add("task-card--show")},Y)},oe=(e,t)=>e.id-t.id,ne=e=>{let t=a();t.forEach(s=>{s.id===parseInt(e.dataset.id,10)&&(s.done=!0,s.id=m())}),t.sort(oe),r(t),n(t)},ae=e=>{if(e.target.matches(".button-icon--check")){let t=e.target.closest(".tasks__item"),s=t.querySelector(".task-card__label"),o=t.querySelector(".task-card__text").value;t.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),e.target.disabled=!0,setTimeout(()=>{se(o)},X),setTimeout(()=>{ne(t),te(),d()},U)}},I=()=>{Z.addEventListener("change",ae)};var re=1e3,ce=document.querySelector(".tasks__list"),E=e=>{let t=a();t=t.filter(s=>s.id!==parseInt(e.dataset.id,10)),r(t),n(t)},de=e=>{if(e.target.matches(".button-icon--bin")){let t=e.target.closest(".tasks__item");e.target.disabled=!0,t.classList.add("task-card--animation"),setTimeout(()=>{E(t),d()},re)}},x=()=>{ce.addEventListener("click",de)};var le=document.querySelector(".tasks__list"),me=(e,t)=>{let s=a();s.forEach(o=>{o.id===parseInt(e.dataset.id,10)&&(o.name=t)}),r(s),n(s)},ie=e=>{if(e.target.matches(".task-card__text")){let t=e.target.closest(".tasks__item"),s=e.target.value;me(t,s)}},C=()=>{le.addEventListener("change",ie)};var F=1e3,ke=document.querySelector("#done-placeholder"),ue=document.querySelector(".button-icon--clear"),Te=()=>{document.querySelectorAll(".done__item").forEach(t=>{t.classList.add("task-card--animation"),setTimeout(()=>{E(t)},F)})},Ee=()=>{Te(),setTimeout(()=>{ke.classList.remove("hidden")},F)},b=()=>{ue.addEventListener("click",Ee)};f();L();I();x();C();b();
