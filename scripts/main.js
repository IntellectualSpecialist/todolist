var R=1500,E=400,l=document.querySelector(".done__list"),M=document.querySelector("#done-task").content.querySelector(".done__item"),P=document.querySelector("#done-placeholder"),p=document.createDocumentFragment(),A=()=>{let t=l.querySelector(".done__item:last-child");t&&t.scrollIntoView(!1)},_=t=>{let e=M.cloneNode(!0);e.classList.add("task-card--new"),e.querySelector(".task-card__text").textContent=t,p.append(e),P.classList.add("hidden"),l.append(p),setTimeout(()=>{l.querySelector(".task-card--new").classList.add("task-card--show")},E)},H=t=>{let e=r();e.forEach(s=>{s.id===parseInt(t.dataset.id,10)&&(s.done=!0)}),c(e),a(e)},S=t=>{let e=t.target.closest(".tasks__item"),s=e.querySelector(".task-card__label"),o=e.querySelector(".task-card__text").value;e.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),t.target.disabled=!0,setTimeout(()=>{_(o)},E),setTimeout(()=>{_(o),H(e),A(),d()},R)};var B=1e3,m=t=>{let e=r();e=e.filter(s=>s.id!==parseInt(t.dataset.id,10)),c(e),a(e)},h=t=>{let e=t.target.closest(".tasks__item");t.target.disabled=!0,e.classList.add("task-card--animation"),setTimeout(()=>{m(e),d()},B)};var W=(t,e)=>{let s=r();s.forEach(o=>{o.id===parseInt(t.dataset.id,10)&&(o.name=e)}),c(s),a(s)},f=t=>{let e=t.target.closest(".tasks__item"),s=t.target.value;W(e,s)};var y=document.querySelector(".tasks__list"),J=document.querySelector("#new-task").content.querySelector(".tasks__item"),V=document.querySelector("#tasks-placeholder"),q=document.createDocumentFragment(),j=document.querySelector(".tasks__count"),g=document.querySelector(".done__list"),z=document.querySelector("#done-task").content.querySelector(".done__item"),G=document.querySelector(".done__count"),K=document.querySelector("#done-placeholder"),L=document.createDocumentFragment(),a=t=>{y.innerHTML="",g.innerHTML="";let e=0,s=0;t.forEach(o=>{if(o.done===!1){let n=J.cloneNode(!0),N=n.querySelector(".button-icon--check"),D=n.querySelector(".button-icon--bin"),O=n.querySelector(".task-card__text");n.querySelector(".task-card__text").value=o.name,n.dataset.id=o.id,q.append(n),V.classList.add("hidden"),N.addEventListener("change",S),D.addEventListener("click",h),O.addEventListener("change",f),e+=1}else{let n=z.cloneNode(!0);n.querySelector(".task-card__text").textContent=o.name,n.dataset.id=o.id,L.append(n),K.classList.add("hidden"),s+=1}}),y.append(q),g.append(L),j.textContent=e,G.textContent=s};var Q=5e3,U=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),X=document.createDocumentFragment(),Y=document.querySelector(".add-tasks"),Z=document.querySelector("#tasks-placeholder"),u=JSON.parse(localStorage.getItem("id"))||0,$=()=>(u+=1,localStorage.setItem("id",JSON.stringify(u)),u),r=()=>JSON.parse(localStorage.getItem("tasks"))||[],c=t=>{localStorage.setItem("tasks",JSON.stringify(t))},v=()=>{let t=r();a(t)},C=(t,e)=>({id:$(),name:t,done:e}),I=()=>{let t=U.cloneNode(!0);X.append(t),Y.append(t),setTimeout(()=>{t.remove()},Q)},d=()=>{document.querySelectorAll(".tasks__item").length===0&&Z.classList.remove("hidden")};var ee=600,T=document.querySelector(".add-tasks__form"),i=T.querySelector(".add-tasks__field"),k=document.querySelector(".tasks__list"),te=document.querySelector("#new-task").content.querySelector(".tasks__item"),se=document.querySelector("#tasks-placeholder"),x=document.createDocumentFragment(),oe=()=>{let t=k.querySelector(".tasks__item:last-child");t&&t.scrollIntoView(!1)},ne=t=>{let e=te.cloneNode(!0);e.classList.add("task-card--new"),e.querySelector(".task-card__text").value=t,x.append(e),se.classList.add("hidden"),k.append(x),setTimeout(()=>{k.querySelector(".task-card--new").classList.add("task-card--show")},0)},ae=t=>{let e=r(),s=C(t,!1);e.push(s),c(e),a(e)},re=t=>{t.preventDefault();let e=i.value;e?(ne(e),setTimeout(()=>{ae(e),oe()},ee),i.blur(),T.reset(),i.focus()):I()},F=()=>{T.addEventListener("submit",re)};var w=1e3,ce=document.querySelector("#done-placeholder"),de=document.querySelector(".button-icon--clear"),le=()=>{document.querySelectorAll(".done__item").forEach(e=>{e.classList.add("task-card--animation"),setTimeout(()=>{m(e)},w)})},me=()=>{le(),setTimeout(()=>{ce.classList.remove("hidden")},w)},b=()=>{de.addEventListener("click",me)};v();F();b();
