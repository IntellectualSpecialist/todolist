var C=document.querySelector("#error-message").content.querySelector(".add-tasks__error"),v=document.createDocumentFragment(),I=document.querySelector(".add-tasks"),c=JSON.parse(localStorage.getItem("id"))||0,b=()=>(c+=1,localStorage.setItem("id",JSON.stringify(c)),c);function n(){return JSON.parse(localStorage.getItem("tasks"))||[]}var m=(e,t)=>({id:b(),name:e,done:t}),i=()=>{let e=C.cloneNode(!0);v.append(e),I.append(e),setTimeout(()=>{e.remove()},5e3)};var O=1e3,x=document.querySelector("#tasks-placeholder"),N=()=>{document.querySelectorAll(".tasks__item").length===0&&x.classList.remove("hidden")},F=e=>{let t=n();t.forEach(s=>{s.id===parseInt(e.dataset.id,10)&&(s.done=!0)}),localStorage.setItem("tasks",JSON.stringify(t)),r(t)},u=e=>{let t=e.target.closest(".tasks__item"),s=t.querySelector(".task-card__label");t.classList.add("task-card--animation"),s.classList.add("task-card__label--effect"),e.target.disabled=!0,setTimeout(()=>{F(t),N()},O)};var k=1e3,R=document.querySelector("#tasks-placeholder"),A=()=>{document.querySelectorAll(".tasks__item").length===0&&R.classList.remove("hidden")},d=e=>{e.classList.add("task-card--animation");let t=n();t=t.filter(s=>s.id!==parseInt(e.dataset.id,10)),localStorage.setItem("tasks",JSON.stringify(t)),setTimeout(()=>{r(t)},k)},p=e=>{let t=e.target.closest(".tasks__item");e.target.disabled=!0,d(t),setTimeout(()=>{A()},k)};var S=e=>{let t=e.target.closest(".tasks__item"),s=n();s.forEach(a=>{a.id===parseInt(t.dataset.id,10)&&(a.name=e.target.value)}),localStorage.setItem("tasks",JSON.stringify(s)),r(s)};var E=document.querySelector(".tasks__list"),H=document.querySelector("#new-task").content.querySelector(".tasks__item"),P=document.querySelector("#tasks-placeholder"),T=document.createDocumentFragment(),D=document.querySelector(".tasks__count"),_=document.querySelector(".done__list"),J=document.querySelector("#done-task").content.querySelector(".done__item"),M=document.querySelector(".done__count"),w=document.querySelector("#done-placeholder"),g=document.createDocumentFragment(),r=e=>{E.innerHTML="",_.innerHTML="";let t=0,s=0;e.forEach(a=>{if(a.done===!1){let o=H.cloneNode(!0),y=o.querySelector(".button-icon--check"),q=o.querySelector(".button-icon--bin"),L=o.querySelector(".task-card__text");o.querySelector(".task-card__text").value=a.name,o.dataset.id=a.id,T.append(o),E.append(T),P.classList.add("hidden"),y.addEventListener("change",u),q.addEventListener("click",p),L.addEventListener("change",S),t+=1}else{let o=J.cloneNode(!0);o.querySelector(".task-card__text").textContent=a.name,o.dataset.id=a.id,g.append(o),_.append(g),w.classList.add("hidden"),s+=1}}),D.textContent=t,M.textContent=s};var l=document.querySelector(".add-tasks__form"),B=l.querySelector(".add-tasks__field"),W=e=>{if(e){let t=n(),s=m(e,!1);t.push(s),localStorage.setItem("tasks",JSON.stringify(t)),r(t)}else i()},j=e=>{e.preventDefault(),W(B.value),l.reset()},f=()=>{l.addEventListener("submit",j)};var z=1e3,G=document.querySelector("#done-placeholder"),K=document.querySelector(".button-icon--clear"),Q=()=>{document.querySelectorAll(".done__item").forEach(t=>{t.classList.add("task-card--animation"),d(t)}),setTimeout(()=>{G.classList.remove("hidden")},z)},h=()=>{K.addEventListener("click",Q)};var U=n();r(U);h();f();
